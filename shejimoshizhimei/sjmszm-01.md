# 设计模式学习导读



## 01-为什么说每个程序员都要尽早地学习并掌握设计模式相关知识？

数据结构和算法是教**如何写出高效代码**，设计模式是教**如何写出可扩展、可读、可维护的高质量代码**。

学习设计模式的几点目的：

### 1.应对面试



### 2.告别烂代码

烂代码：命名不规范、类设计不合理、分层不清晰、没有模块化概念、代码结构混乱、高度耦合等等。



### 3.提高复杂代码的设计和开发能力

跟业务无关的比较通用的功能模块。

如何分层、分模块？应该怎么划分类？每个类应该具有哪些属性、方法？怎么设计类之间的交互？该用继承还是组合？该使用接口还是抽象类？怎样做到解耦、高内聚低耦合？该用单例模式还是静态方法？用工厂模式创建对象还是直接 new 出来？如何避免引入设计模式提高扩展性的同时带来的降低可读性问题？



### 4.让读源码、学框架事半功倍

<font color=#FF8C00>**对技术的积累，既要有广度，也要有深度。**</font>

学好设计模式相关的知识，不仅能更轻松地读懂开源项目，还能更深入地参透里面的技术精髓，做到事半功倍。



### 5.为职场发展做铺垫





## 02-从哪些维度评判代码质量的好坏？如何具备写出高质量代码的能力？

常用评价标准：可维护性、可读性、可扩展性、灵活性、简洁性（简单、复杂）、可复用性、可测试性。

### 1. 可维护性（maintainability）

如果 bug 容易修复，修改、添加功能能够轻松完成，那我们就可以主观地认为代码对我们来说易维护。

### 2.  可读性（readability）

> Any fool can write code that a computer can understand. Good programmers write code that humans can understand.
>
> “任何傻瓜都会编写计算机能理解的代码。好的程序员能够编写人能够理解的代码。”
>
> --  Martin Fowler

看代码是否符合编码规范、命名是否达意、注释是否详尽、函数是否长短合适、模块划分是否清晰、是否符合高内聚低耦合等等。

**code review** 是一个很好的测验代码可读性的手段。如果你的同事可以轻松地读懂你写的代码，那说明你的代码可读性很好。

### 3. 可扩展性（extensibility）

在不修改或少量修改原有代码的情况下，通过扩展的方式添加新的功能代码。

**“对修改关闭，对扩展开放”**。

### 4. 灵活性（flexibility）

几个引发关于灵活性思考的场景：

- 当我们添加一个新的功能代码的时候，原有的代码已经预留好了扩展点，我们不需要修改原有的代码，只要在扩展点上添加新的代码即可。这个时候，我们除了可以说代码易扩展，还可以说代码写得好灵活。
- 当我们要实现一个功能的时候，发现原有代码中，已经抽象出了很多底层可以复用的模块、类等代码，我们可以拿来直接使用。这个时候，我们除了可以说代码易复用之外，还可以说代码写得好灵活。
- 当我们使用某组接口的时候，如果这组接口可以应对各种使用场景，<u>满足各种不同的需求</u>，我们除了可以说接口易用之外，还可以说这个接口设计得好灵活或者代码写得好灵活。

### 5. 简洁性（simplicity）

<font color=#FF8C00>**思从深而行从简**</font>

### 6. 可复用性（reusability）

代码可复用性跟 DRY（Don’t Repeat Yourself）这条设计原则的关系挺紧密的。

### 7. 可测试性（testability）

代码的可测试性差，比较难写单元测试，那基本上就能说明代码设计得有问题。



### 如何才能写出高质量的代码？

编程方法论，包括面向对象设计思想、设计原则、设计模式、编码规范、重构技巧等。



## 03-面向对象、设计原则、设计模式、编程规范、重构，这五者有何关系？



### 面向对象

主流的编程范式/编程风格：面向过程、面向对象和函数式编程。

面向对象7大知识点：

1. 面向对象的四大特性：**封装、抽象、继承、多态**
2. 面向对象编程与面向过程编程的区别和联系
3. 面向对象分析、面向对象设计、面向对象编程
4. 接口和抽象类的区别以及各自的应用场景
5. 基于接口而非实现编程的设计思想
6. 多用组合少用继承的设计思想
7. 面向过程的贫血模型和面向对象的充血模型



### 设计原则

设计原则是指导代码设计的一些**<font color=#FF8C00>经验总结</font>**。抽象、模糊。

对于每种设计原则，掌握其**设计初衷**，**能解决哪些编程问题**，**有哪些应用场景**。

常用的设计原则：

- SOLID 原则 -SRP 单一职责原则
- SOLID 原则 -OCP 开闭原则
- SOLID 原则 -LSP 里式替换原则
- SOLID 原则 -ISP 接口隔离原则
- SOLID 原则 -DIP 依赖倒置原则
- DRY 原则、KISS 原则、YAGNI 原则、LOD 法则

### 设计模式

大部分设计模式要解决的都是<font color=#FF8C00>**代码的可扩展性问题**</font>。

设计模式相对于设计原则来说，<u>没有那么抽象，而且大部分都不难理解，代码实现也并不复杂</u>。它的难点是了解它们都**能解决哪些问题，掌握典型的应用场景，并且懂得不过度应用**。

3类23种经典设计模式：

1. 创建型

   常用的有：单例模式、工厂模式（工厂方法和抽象工厂）、建造者模式。

   不常用的有：原型模式。

2. 结构型

   常用的有：代理模式、桥接模式、装饰者模式、适配器模式。

   不常用的有：门面模式、组合模式、享元模式。

3. 行为型

   常用的有：观察者模式、模板模式、策略模式、职责链模式、迭代器模式、状态模式。

   不常用的有：访问者模式、备忘录模式、命令模式、解释器模式、中介模式。



### 编程规范

编程规范主要解决的是<font color=#FF8C00>**代码的可读性问题**</font>。相对于设计原则、设计模式，更加**具体**、更加**偏重代码细节**。比如，如何给变量、类、函数命名，如何写代码注释，函数不宜过长、参数不能过多等等。

《重构》《代码大全》《代码整洁之道》

### 代码重构

在软件开发中，只要软件在不停地迭代，就没有一劳永逸的设计。

**持续重构**是保持代码质量不下降的有效手段，能有效避免代码腐化到无可救药的地步。

- 重构的**目的（why）、对象（what）、时机（when）、方法（how）**；
- 保证重构不出错的技术手段：**单元测试和代码的可测试性**；
- 两种不同规模的重构：**大重构（大规模高层次）和小重构（小规模低层次）**。

### 五者之间的联系

- **面向对象**编程因为其具有丰富的特性（封装、抽象、继承、多态），可以实现很多复杂的设计思路，是很多设计原则、设计模式等编码实现的**基础**。
- **设计原则**是指导我们代码设计的一些经验总结，对于某些场景下，是否应该应用某种设计模式，具有指导意义。比如，“开闭原则”是很多设计模式（策略、模板等）的指导原则。
- **设计模式**是针对软件开发中经常遇到的一些设计问题，总结出来的一套解决方案或者设计思路。应用设计模式的主要目的是提高代码的可扩展性。从抽象程度上来讲，设计原则比设计模式更抽象。设计模式更加具体、更加可执行。
- **编程规范**主要解决的是代码的可读性问题。编码规范相对于设计原则、设计模式，更加具体、更加偏重代码细节、更加能落地。持续的小重构依赖的理论基础主要就是编程规范。
- **重构**作为保持代码质量不下降的有效手段，利用的就是面向对象、设计原则、设计模式、编码规范这些理论。





面向对象是武器，设计模式是招式，设计原则是心法。
以心法为基础，以武器运用招式应对复杂的编程问题。

